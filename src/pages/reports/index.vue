<template>
  <div class="space-y-6">
    <!-- Page Header -->
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-2xl font-bold text-gray-900">B√°o c√°o</h1>
        <p class="text-gray-600">Th·ªëng k√™ v√† ph√¢n t√≠ch d·ªØ li·ªáu</p>
      </div>
      
      <div class="flex items-center space-x-3">
        <select class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500">
          <option>7 ng√†y qua</option>
          <option>30 ng√†y qua</option>
          <option>90 ng√†y qua</option>
          <option>12 th√°ng qua</option>
        </select>
        <button class="btn btn-primary">
          <ChartBarIcon class="h-4 w-4 mr-2" />
          Xu·∫•t b√°o c√°o
        </button>
      </div>
    </div>

    <!-- Summary Stats -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <div class="card hover-lift">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
            <span class="text-2xl">üí∞</span>
          </div>
          <div class="ml-4">
            <p class="text-sm text-gray-600">T·ªïng doanh thu</p>
            <h3 class="text-xl font-bold text-gray-900">‚Ç´125.8M</h3>
            <p class="text-xs text-green-600">+15.3% so v·ªõi k·ª≥ tr∆∞·ªõc</p>
          </div>
        </div>
      </div>

      <div class="card hover-lift">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
            <span class="text-2xl">üì¶</span>
          </div>
          <div class="ml-4">
            <p class="text-sm text-gray-600">T·ªïng ƒë∆°n h√†ng</p>
            <h3 class="text-xl font-bold text-gray-900">3,847</h3>
            <p class="text-xs text-green-600">+22.5% so v·ªõi k·ª≥ tr∆∞·ªõc</p>
          </div>
        </div>
      </div>

      <div class="card hover-lift">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center">
            <span class="text-2xl">üë•</span>
          </div>
          <div class="ml-4">
            <p class="text-sm text-gray-600">Kh√°ch h√†ng m·ªõi</p>
            <h3 class="text-xl font-bold text-gray-900">1,245</h3>
            <p class="text-xs text-green-600">+8.7% so v·ªõi k·ª≥ tr∆∞·ªõc</p>
          </div>
        </div>
      </div>

      <div class="card hover-lift">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
            <span class="text-2xl">üìà</span>
          </div>
          <div class="ml-4">
            <p class="text-sm text-gray-600">T·ª∑ l·ªá chuy·ªÉn ƒë·ªïi</p>
            <h3 class="text-xl font-bold text-gray-900">3.2%</h3>
            <p class="text-xs text-red-600">-0.5% so v·ªõi k·ª≥ tr∆∞·ªõc</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Revenue Chart -->
      <div class="lg:col-span-2 card">
        <div class="card-header flex items-center justify-between">
          <h3 class="text-lg font-semibold text-gray-900">Doanh thu theo th·ªùi gian</h3>
          <select class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500">
            <option>Theo ng√†y</option>
            <option>Theo tu·∫ßn</option>
            <option>Theo th√°ng</option>
          </select>
        </div>
        <div class="card-body">
          <div class="h-80 flex items-center justify-center bg-gradient-to-br from-primary-50 to-blue-50 rounded-lg">
            <div class="text-center">
              <span class="text-6xl mb-4 block">üìä</span>
              <p class="text-gray-600">Bi·ªÉu ƒë·ªì ƒë∆∞·ªùng doanh thu theo th·ªùi gian</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Products -->
      <div class="card">
        <div class="card-header">
          <h3 class="text-lg font-semibold text-gray-900">Top s·∫£n ph·∫©m</h3>
        </div>
        <div class="card-body">
          <div class="space-y-4">
            <div v-for="i in 5" :key="i" class="flex items-center">
              <span class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold">#{{ i }}</span>
              <div class="ml-3 flex-1">
                <p class="text-sm font-medium text-gray-900">S·∫£n ph·∫©m {{ i }}</p>
                <div class="mt-1 w-full bg-gray-200 rounded-full h-1.5">
                  <div class="bg-gradient-to-r from-primary-500 to-orange-500 h-1.5 rounded-full" :style="{ width: (100 - i * 15) + '%' }"></div>
                </div>
              </div>
              <span class="ml-4 text-sm font-semibold text-gray-900">{{ 1000 - i * 100 }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Categories -->
      <div class="card">
        <div class="card-header">
          <h3 class="text-lg font-semibold text-gray-900">Ph√¢n lo·∫°i ƒë∆°n h√†ng</h3>
        </div>
        <div class="card-body">
          <div class="h-64 flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg mb-4">
            <div class="text-center">
              <span class="text-6xl">ü•ß</span>
              <p class="text-gray-600 mt-2">Bi·ªÉu ƒë·ªì tr√≤n ph√¢n lo·∫°i ƒë∆°n h√†ng</p>
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <span class="w-3 h-3 bg-green-500 rounded-full mr-2"></span>
                <span class="text-sm text-gray-700">Ho√†n th√†nh</span>
              </div>
              <span class="text-sm font-semibold text-gray-900">65%</span>
            </div>
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <span class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></span>
                <span class="text-sm text-gray-700">ƒêang x·ª≠ l√Ω</span>
              </div>
              <span class="text-sm font-semibold text-gray-900">25%</span>
            </div>
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <span class="w-3 h-3 bg-red-500 rounded-full mr-2"></span>
                <span class="text-sm text-gray-700">H·ªßy</span>
              </div>
              <span class="text-sm font-semibold text-gray-900">10%</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Traffic Sources -->
    <div class="card">
      <div class="card-header">
        <h3 class="text-lg font-semibold text-gray-900">Ngu·ªìn traffic</h3>
      </div>
      <div class="card-body">
        <div class="space-y-3">
          <div v-for="(source, i) in ['Direct', 'Google', 'Facebook', 'Instagram', 'Other']" :key="i" class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
            <div class="flex items-center">
              <span class="text-xl mr-3">üåê</span>
              <span class="font-medium text-gray-900">{{ source }}</span>
            </div>
            <div class="flex items-center space-x-4">
              <span class="font-semibold text-gray-900">{{ 30 - i * 5 }}%</span>
              <span class="text-sm text-gray-600">{{ 5000 - i * 800 }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Detailed Transactions Table -->
    <div class="card">
      <div class="card-header flex items-center justify-between">
        <h3 class="text-lg font-semibold text-gray-900">Chi ti·∫øt giao d·ªãch g·∫ßn ƒë√¢y</h3>
        <button class="btn btn-outline btn-sm">
          <ArrowDownTrayIcon class="h-4 w-4 mr-2" />
          Xu·∫•t Excel
        </button>
      </div>
      
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>M√£ GD</th>
              <th>Ng√†y</th>
              <th>Kh√°ch h√†ng</th>
              <th>S·∫£n ph·∫©m</th>
              <th>S·ªë l∆∞·ª£ng</th>
              <th>Gi√° tr·ªã</th>
              <th>Tr·∫°ng th√°i</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="i in 8" :key="i">
              <td>
                <span class="font-medium text-primary-600">#TRX{{ 10000 + i }}</span>
              </td>
              <td class="text-gray-600">{{ new Date().toLocaleDateString('vi-VN') }}</td>
              <td class="text-gray-900">Kh√°ch h√†ng {{ i }}</td>
              <td class="text-gray-900">S·∫£n ph·∫©m {{ i }}</td>
              <td class="text-center">{{ i }}</td>
              <td class="font-semibold text-gray-900">{{ formatCurrency(Math.random() * 10000000) }}</td>
              <td>
                <span class="badge" :class="getStatusClass(i % 3)">
                  {{ getStatusText(i % 3) }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ChartBarIcon, ArrowDownTrayIcon } from '@heroicons/vue/24/outline'

definePageMeta({
  layout: 'default'
})

const formatCurrency = (amount) => {
  return new Intl.NumberFormat('vi-VN', {
    style: 'currency',
    currency: 'VND'
  }).format(amount)
}

const getStatusClass = (index) => {
  const classes = ['badge-success', 'badge-warning', 'badge-danger']
  return classes[index]
}

const getStatusText = (index) => {
  const texts = ['Ho√†n th√†nh', 'ƒêang x·ª≠ l√Ω', 'H·ªßy']
  return texts[index]
}
</script>